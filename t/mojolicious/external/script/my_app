#!/usr/bin/env perl

use strict;
use warnings;

# "Behold, a time traveling machine.
#  Time? I can't go back there!
#  Ah, but this machine only goes forward in time.
#  That way you can't accidentally change history or do something disgusting
#  like sleep with your own grandmother.
#  I wouldn't want to do that again."
use File::Basename 'dirname';
use File::Spec::Functions qw/catfile splitdir/;

# Source directory has precedence
my @base = splitdir(dirname(__FILE__));
-e catfile(@base, '..', 'Makefile.PL')
  ? unshift(@INC, join('/', @base, '..', 'lib'))
  : push(@INC, join('/', @base, '..', 'lib'));

# Check if Mojolicious is installed
die <<EOF unless eval 'use Mojolicious::Commands; 1';
It looks like you don't have the Mojolicious framework installed.
Please visit http://mojolicio.us for detailed installation instructions.

EOF

# Application
$ENV{MOJO_APP} ||= 'MyApp';

# Start commands
Mojolicious::Commands->start;
